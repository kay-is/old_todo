(function(){var t;t=window.App=Em.Application.create(),t.ApplicationSerializer=DS.LSSerializer.extend(),t.ApplicationAdapter=DS.LSAdapter.extend({namespace:"todo"}),t.Router.map(function(){this.resource("todolist",{path:"/:list"}),this.resource("edittask",{path:"/edit/:id"}),this.route("newtask",{path:"/new"})}),t.ApplicationRoute=Em.Route.extend({init:function(){this._super.apply(this,arguments),this.store.find("todo")}}),t.IndexRoute=Em.Route.extend({beforeModel:function(){return this.transitionTo("todolist","inbox")}}),t.TodolistRoute=Em.Route.extend({model:function(t){var e;return e=t.list,document.title="Todo: "+e.charAt(0).toUpperCase()+e.substr(1).toLowerCase(),this.store.filter("todo",{list:e},function(t){return t.get("list")===e})},afterModel:function(t){document.title+=" ("+t.content.length+")"}}),t.TodolistController=Em.ArrayController.extend({getCount:function(t){return this.store.all("todo").filterBy("list",t).length},inboxCount:function(){return this.getCount("inbox")}.property("@each.list"),nextCount:function(){return this.getCount("next")}.property("@each.list"),waitingCount:function(){return this.getCount("waiting")}.property("@each.list"),maybeCount:function(){return this.getCount("maybe")}.property("@each.list"),doneCount:function(){return this.getCount("done")}.property("@each.list"),projects:function(){var t;return t={},this.store.all("todo").forEach(function(e){var o;o=e.get("project"),o&&(t[o]=!0)}),Object.keys(t)}.property("@each.project"),actions:{move:function(t,e){return"out"===t?(e.deleteRecord(),e.save()):e.set("list",t).save()}}}),t.NewtaskController=Em.Controller.extend({needs:["todolist"],list:"inbox",project:"",actions:{setproject:function(t){this.set("project",t)},create:function(){var t,e;t=this.getProperties(["title","project","list","description","dueBy"]),e=this.store.createRecord("todo",t),e.save(),this.set("title",""),this.set("project",""),this.set("description",""),this.transitionTo("index")}}}),t.EdittaskController=Em.ObjectController.extend({needs:["todolist"],actions:{setproject:function(t){this.set("project",t)},save:function(){var t;t=this.get("model"),t.save(),this.transitionTo("todolist",t.get("list"))},cancel:function(){var t;t=this.get("model"),t.rollback(),this.transitionTo("todolist",t.get("list"))}}}),t.Todo=DS.Model.extend({title:DS.attr("string"),description:DS.attr("string"),project:DS.attr("string"),list:DS.attr("string"),showOut:function(){return"done"===this.get("list")}.property("list"),showNext:function(){return"next"!==this.get("list")}.property("list"),showWaiting:function(){return"waiting"!==this.get("list")}.property("list"),showMaybe:function(){return"maybe"!==this.get("list")}.property("list"),showDone:function(){var t;return t=this.get("list"),"done"!==t&&"inbox"!==t}.property("list")}),t.TabLiComponent=Em.Component.extend({tagName:"li",classNameBindings:["active"],active:function(){return this.get("childViews").anyBy("active")}.property("childViews.@each.active")}),Em.Handlebars.helper("markdown",function(t){return t?new Em.Handlebars.SafeString(marked(t)):void 0})}).call(this);